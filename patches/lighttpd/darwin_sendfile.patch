diff --git a/lighttpd-1.4.35/src/network_backends.h b/source/src/network_backends.h
index 5813253a..f2ec58bb 100644
--- a/lighttpd-1.4.35/src/network_backends.h
+++ b/source/src/network_backends.h
@@ -15,9 +15,22 @@
 # include <sys/uio.h>
 #endif
 
-#if defined HAVE_SYS_UIO_H && defined HAVE_SENDFILE && defined HAVE_WRITEV && (defined(__FreeBSD__) || defined(__DragonFly__))
+#if defined HAVE_SYS_UIO_H && defined HAVE_SENDFILE && defined HAVE_WRITEV && (defined(__FreeBSD__) || defined(__DragonFly__) || defined(__APPLE__))
 # define USE_FREEBSD_SENDFILE
 # include <sys/uio.h>
+# ifdef __APPLE__
+#  include <sys/types.h>
+#  include <sys/socket.h>
+#  include <limits.h>
+#  ifndef UIO_MAXIOV
+#   define UIO_MAXIOV IOV_MAX
+#  endif
+   static __inline int _darwin_sendfile(
+    int fd, int s, off_t offset, off_t *len, struct sf_hdtr *hdtr, int flags)
+    {return sendfile(fd, s, offset, len, hdtr, flags);}
+#  define sendfile(fd, s, offset, nbytes, hdtr, sbytes, flags) \
+    ((*sbytes)=(off_t)(nbytes),_darwin_sendfile(fd, s, offset, sbytes, hdtr, flags))
+# endif
 #endif
 
 #if defined HAVE_SYS_SENDFILE_H && defined HAVE_SENDFILEV && defined HAVE_WRITEV && defined(__sun)
